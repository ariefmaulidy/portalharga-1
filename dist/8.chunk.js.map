{"version":3,"file":"8.chunk.js","sources":["webpack:///./src/app/auth/login/login.module.ts","webpack:///./src/app/auth/login/login.component.ts","webpack:///./src/app/auth/login/login.routing.ts","webpack:///./src/app/auth/login/login.scss","webpack:///./src/app/auth/login/login.html"],"sourcesContent":["import { NgModule }      from '@angular/core';\nimport { CommonModule }  from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgaModule } from '../../theme/nga.module';\n\nimport { Login } from './login.component';\nimport { routing }       from './login.routing';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    NgaModule,\n    routing\n  ],\n  declarations: [\n    Login\n  ]\n})\nexport class LoginModule {}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./src/app/auth/login/login.module.ts","import { Component, ViewEncapsulation } from '@angular/core';\nimport { FormGroup, AbstractControl, FormBuilder, Validators } from '@angular/forms';\nimport { Http, Headers } from '@angular/http';\nimport { JwtHelper } from 'angular2-jwt';\nimport { Router } from '@angular/router';\nimport { ToastrService } from 'toastr-ng2';\n\n@Component({\n  selector: 'login',\n  encapsulation: ViewEncapsulation.None,\n  styles: [require('./login.scss')],\n  template: require('./login.html'),\n})\n\nexport class Login {\n  public role;\n  private decode;\n  public data:string;\n  public progress:boolean = false;\n\n  public form:FormGroup;\n  public username:AbstractControl;\n  public password:AbstractControl;\n  public submitted:boolean = false;\n\n  jwtHelper: JwtHelper = new JwtHelper();\n\n  public urlLogin = 'https://ph.yippytech.com:5000/user/auth';\n\n  headers = new Headers({\n    'Content-Type' : 'application/json'\n  });\n\n  constructor(private router: Router, fb:FormBuilder, private http: Http, private toastr: ToastrService) {\n    this.form = fb.group({\n      'username': ['', Validators.compose([Validators.required, Validators.minLength(4)])],\n      'password': ['', Validators.compose([Validators.required, Validators.minLength(4)])]\n    });\n    this.username = this.form.controls['username'];\n    this.password = this.form.controls['password'];\n  }\n\n  private authHttpFunction(username, password) {\n    \n    let creds = JSON.stringify({ username: username.value, password: password.value, login_type: 0 });\n\n    this.http.post(this.urlLogin, creds, {headers:this.headers})\n      .map(res => res.json())\n      .subscribe(data => {\n          if(data.success === true){\n            localStorage.setItem('id_token', data.token);\n            this.checkRole();\n          }else{\n            this.showMessageError('Sign in Failed')\n          }\n          this.progress = false;\n        },\n        err =>{\n          this.showMessageError(err.message);\n          this.progress = false;\n        }\n      )\n  }\n\n  public showMessageSuccess(message) {\n    this.toastr.success(message,'Success!');\n  }\n\n  public showMessageError(message) {\n    this.toastr.error(message,'Error!');\n  }\n\n  private checkRole(){\n    //decode token form localStorage('id_token')\n    this.decode = this.jwtHelper.decodeToken(localStorage.getItem('id_token'));\n    this.role = this.decode.role; \n    //checking role admin / pemerintah\n    if (this.role === 1) {\n      this.router.navigate(['/admin']);\n      this.showMessageSuccess(\"Selamat datang di Portal Harga\");\n    }\n    else if(this.role === 2){\n      this.router.navigate(['/gov']);\n      this.showMessageSuccess(\"Selamat datang di Portal Harga\");\n    }else{\n      this.showMessageError(\"Anda tidak memilik akses\");\n    }\n  }\n\n  private onSubmit(values:Object):void {\n    this.progress = true;\n    this.submitted = true;\n    if (this.form.valid) {\n      this.authHttpFunction(this.username,this.password);\n    }\n  }\n\n  ngOnInit() {\n    if (localStorage.getItem('id_token')) {\n      this.checkRole();\n    }\n  }\n}\n//irmusyafa.dev © 2017\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./src/app/auth/login/login.component.ts","import { Routes, RouterModule }  from '@angular/router';\n\nimport { Login } from './login.component';\nimport { ModuleWithProviders } from '@angular/core';\n\n// noinspection TypeScriptValidateTypes\nexport const routes: Routes = [\n  {\n    path: '',\n    component: Login\n  }\n];\n\nexport const routing: ModuleWithProviders = RouterModule.forChild(routes);\n\n\n\n// WEBPACK FOOTER //\n// node_modules/angular2-template-loader!./src/app/auth/login/login.routing.ts","module.exports = \".auth-main {\\n  display: flex;\\n  height: 100%;\\n  width: 100%;\\n  position: absolute;\\n  background-color: #aee06d;\\n  background-size: cover; }\\n\\n.form-control {\\n  color: black; }\\n\\n.form-control:empty {\\n  background-color: #white; }\\n\\n.auth-block {\\n  width: 320px;\\n  border-radius: 5px;\\n  background: rgba(255, 255, 255, 0.55);\\n  color: #fff;\\n  padding: 32px; }\\n  .auth-block h1 {\\n    font-weight: 300; }\\n  .auth-block p {\\n    font-weight: 300;\\n    color: black;\\n    font-size: 12px; }\\n  .auth-block a {\\n    text-decoration: none;\\n    outline: none;\\n    transition: all 0.2s ease;\\n    color: #8bd22f; }\\n    .auth-block a:hover {\\n      color: #76b328; }\\n  .auth-block .control-label {\\n    padding-top: 11px;\\n    color: black; }\\n  .auth-block .form-group {\\n    margin-bottom: 12px; }\\n\\n.auth-input {\\n  width: 300px;\\n  margin-bottom: 24px; }\\n  .auth-input input {\\n    display: block;\\n    width: 100%;\\n    border: none;\\n    font-size: 16px;\\n    padding: 4px 10px;\\n    outline: none; }\\n\\n.btn {\\n  font-weight: 300; }\\n\\na.forgot-pass {\\n  display: block;\\n  text-align: right;\\n  margin-bottom: -20px;\\n  float: right;\\n  z-index: 2;\\n  position: relative; }\\n\\n.auth-link {\\n  display: block;\\n  font-size: 16px;\\n  text-align: center;\\n  margin-bottom: 33px; }\\n\\n.auth-sep {\\n  margin-top: 36px;\\n  margin-bottom: 24px;\\n  line-height: 20px;\\n  font-size: 16px;\\n  text-align: center;\\n  display: block;\\n  position: relative; }\\n  .auth-sep > span {\\n    display: table-cell;\\n    width: 30%;\\n    white-space: nowrap;\\n    padding: 0 24px;\\n    color: #ffffff; }\\n    .auth-sep > span > span {\\n      margin-top: -12px;\\n      display: block; }\\n  .auth-sep:before, .auth-sep:after {\\n    border-top: solid 1px #ffffff;\\n    content: \\\"\\\";\\n    height: 1px;\\n    width: 35%;\\n    display: table-cell; }\\n\\n.al-share-auth {\\n  text-align: center; }\\n  .al-share-auth .al-share {\\n    float: none;\\n    margin: 0;\\n    padding: 0;\\n    display: inline-block; }\\n    .al-share-auth .al-share li {\\n      margin-left: 24px; }\\n      .al-share-auth .al-share li:first-child {\\n        margin-left: 0; }\\n      .al-share-auth .al-share li i {\\n        font-size: 24px; }\\n\\n.btn-auth {\\n  color: #ffffff !important; }\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/auth/login/login.scss\n// module id = 781\n// module chunks = 8","module.exports = \"<div class=\\\"auth-main\\\">\\n  <div class=\\\"auth-block\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col col-md-3\\\">\\n        \\n      </div>\\n      <div class=\\\"col col-md-9\\\">\\n        <h1>Portal Harga</h1>\\n        <p>&nbsp;Pemerintah & Admin </p>\\n      </div>\\n    </div>\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit(form.value)\\\" class=\\\"form-horizontal\\\">\\n\\n      <div class=\\\"form-group row\\\" [ngClass]=\\\"{'has-error': (!username.valid && username.touched), 'has-success': (username.valid && username.touched)}\\\">\\n        <label class=\\\" control-label\\\">Username</label>\\n        <input [formControl]=\\\"username\\\" class=\\\"form-control\\\" placeholder=\\\"Username\\\">\\n      </div>\\n\\n      <div class=\\\"form-group row\\\" [ngClass]=\\\"{'has-error': (!password.valid && password.touched), 'has-success': (password.valid && password.touched)}\\\">\\n        <label class=\\\" control-label\\\">Password</label>\\n        <input [formControl]=\\\"password\\\" type=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Password\\\">\\n      </div>\\n\\n      <div class=\\\"form-group row\\\">\\n          <button [disabled]=\\\"!form.valid\\\" type=\\\"submit\\\" class=\\\"btn btn-success btn-block btn-raised btn-lg\\\"><i class=\\\"fa fa-spinner fa-spin\\\" [hidden]=\\\"!progress\\\" aria-hidden=\\\"true\\\"></i> Sign in</button>\\n          <!-- <a routerLink=\\\"/login\\\" class=\\\"forgot-pass\\\">Forgot password?</a> -->\\n      </div>\\n\\n      <hr>\\n      <p align=\\\"center\\\"> Portal Harga © 2017</p>\\n    </form>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/auth/login/login.html\n// module id = 800\n// module chunks = 8"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAeA;AAAA;AAAA;AAZA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAAA;AACA;AAAA;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AASA;AAmBA;AAAA;AAAA;AAAA;AAfA;AAKA;AAEA;AAEA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AA9FA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAAA;AA0FA;AAAA;AACA;;;;;;;;;;;;;;;;;ACvGA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;ACbA;;;;;;;ACAA;;;;","sourceRoot":""}